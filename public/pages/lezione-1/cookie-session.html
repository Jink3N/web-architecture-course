<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie & Session</title>
    <link rel="stylesheet" href="../style.css">
    <meta name="description" content="Cookie e sessioni: persistenza stato, sicurezza e best practices.">
</head>
<body>
<header class="app-header"><div class="header-content"><h1 class="header-title">🏗️ Architettura Web</h1><button class="theme-toggle" id="themeToggle" aria-label="Cambia tema"><span class="theme-toggle-icon">🌙</span><span class="theme-toggle-text">Dark</span></button></div></header>
<div class="app-container">
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h1 class="sidebar-title">🏗️ Architettura Web</h1>
            <p class="sidebar-subtitle">Dal Mainframe al Cloud</p>
            <div class="progress-indicator"><div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div><span class="progress-text" id="progressText">Sezione 15 di 25</span></div>
        </div>
        <nav class="sidebar-nav"><ul class="nav-list" id="navList">
            <li class="nav-item"><a href="intro.html" class="nav-link"><span class="nav-icon">🏗️</span><span class="nav-text">Introduzione</span></a></li>
            <li class="nav-item"><a href="client-server.html" class="nav-link"><span class="nav-icon">🔄</span><span class="nav-text">Client-Server</span></a></li>
            <li class="nav-item"><a href="monolithic.html" class="nav-link"><span class="nav-icon">🏢</span><span class="nav-text">Monolitica</span></a></li>
            <li class="nav-item"><a href="microservices.html" class="nav-link"><span class="nav-icon">🔧</span><span class="nav-text">Microservizi</span></a></li>
            <li class="nav-item"><a href="spa.html" class="nav-link"><span class="nav-icon">📱</span><span class="nav-text">SPA</span></a></li>
            <li class="nav-item"><a href="http.html" class="nav-link"><span class="nav-icon">🌐</span><span class="nav-text">HTTP</span></a></li>
            <li class="nav-item"><a href="cors.html" class="nav-link"><span class="nav-icon">🔐</span><span class="nav-text">CORS</span></a></li>
            <li class="nav-item"><a href="csrf.html" class="nav-link"><span class="nav-icon">🛡️</span><span class="nav-text">CSRF</span></a></li>
            <li class="nav-item"><a href="url-uri.html" class="nav-link"><span class="nav-icon">🔗</span><span class="nav-text">URL & URI</span></a></li>
            <li class="nav-item"><a href="api-soap.html" class="nav-link"><span class="nav-icon">⚡</span><span class="nav-text">REST vs SOAP</span></a></li>
            <li class="nav-item"><a href="rest.html" class="nav-link"><span class="nav-icon">🏗️</span><span class="nav-text">REST</span></a></li>
            <li class="nav-item"><a href="endpoints.html" class="nav-link"><span class="nav-icon">🎯</span><span class="nav-text">Endpoints</span></a></li>
            <li class="nav-item"><a href="json-xml.html" class="nav-link"><span class="nav-icon">📄</span><span class="nav-text">JSON vs XML</span></a></li>
            <li class="nav-item"><a href="jwt.html" class="nav-link"><span class="nav-icon">🔑</span><span class="nav-text">JWT</span></a></li>
            <li class="nav-item active"><a href="cookie-session.html" class="nav-link"><span class="nav-icon">🍪</span><span class="nav-text">Cookie & Session</span></a></li>
            <li class="nav-item"><a href="webstorage.html" class="nav-link"><span class="nav-icon">💾</span><span class="nav-text">Web Storage</span></a></li>
            <li class="nav-item"><a href="api-keys.html" class="nav-link"><span class="nav-icon">🗝️</span><span class="nav-text">API Keys</span></a></li>
            <li class="nav-item"><a href="oauth.html" class="nav-link"><span class="nav-icon">🔓</span><span class="nav-text">OAuth 2.0</span></a></li>
            <li class="nav-item"><a href="oidc.html" class="nav-link"><span class="nav-icon">🆔</span><span class="nav-text">OpenID Connect</span></a></li>
            <li class="nav-item"><a href="nodejs-intro.html" class="nav-link"><span class="nav-icon">⚙️</span><span class="nav-text">Node.js Intro</span></a></li>
            <li class="nav-item"><a href="installation.html" class="nav-link"><span class="nav-icon">💻</span><span class="nav-text">Installazione</span></a></li>
            <li class="nav-item"><a href="vscode.html" class="nav-link"><span class="nav-icon">📝</span><span class="nav-text">VS Code</span></a></li>
            <li class="nav-item"><a href="first-app.html" class="nav-link"><span class="nav-icon">🚀</span><span class="nav-text">Prima App</span></a></li>
            <li class="nav-item"><a href="spa-details.html" class="nav-link"><span class="nav-icon">🎨</span><span class="nav-text">SPA Dettagli</span></a></li>
            <li class="nav-item"><a href="spa-nodejs.html" class="nav-link"><span class="nav-icon">🔄</span><span class="nav-text">SPA Node.js</span></a></li>
        </ul></nav>
        <div class="sidebar-footer"><button class="toggle-sidebar" id="toggleSidebar"><span>←</span></button></div>
    </aside>
    <main class="main-content" id="mainContent"><div class="content-container" id="contentContainer"><section class="content-section active" id="cookie-session"><div class="section-content">
        <header class="section-header"><h1>🍪 Cookie & Session</h1><p class="section-description">Persistenza dello stato utente su protocollo stateless.</p></header>
        <article class="subsection">
            <h2>📜 Perché esistono</h2><p>HTTP non mantiene contesto. Cookie identificano il client, la sessione lato server mantiene dati associati.</p>
            <h2>🧩 Differenze</h2>
            <div class="definition-cards"><div class="definition-card client"><h3>Cookie</h3><h4>Lato client</h4><ul><li>Inviati automaticamente</li><li>~4KB</li><li>Scope dominio/path</li><li>Tracciamento & preferenze</li></ul></div><div class="definition-card server"><h3>Sessione</h3><h4>Lato server</h4><ul><li>ID in cookie</li><li>Dati sicuri</li><li>Scadenza controllata</li><li>Scalabile con store condiviso</li></ul></div></div>
            <h2>🧾 Attributi Cookie</h2>
            <div class="examples-grid"><div class="example-card"><h3>Set-Cookie</h3><pre><code>Set-Cookie: sid=abc123; HttpOnly; Secure; SameSite=Lax; Path=/; Max-Age=1800</code></pre></div><div class="example-card"><h3>Attributi</h3><pre><code>Domain  Path  Expires/Max-Age\nSecure  HttpOnly  SameSite</code></pre></div><div class="example-card"><h3>SameSite</h3><ul><li>Strict</li><li>Lax (default moderno)</li><li>None (+Secure)</li></ul></div><div class="example-card"><h3>Uso Corretto</h3><ul><li>HttpOnly per sessione</li><li>Secure in produzione</li><li>Short expiry</li><li>No dati sensibili</li></ul></div></div>
            <h2>⚙️ Flow Sessione</h2>
            <div class="communication-flow"><div class="flow-step"><div class="step-number">1</div><div class="step-content"><h3>Login</h3><p>Validazione credenziali → crea session record.</p></div></div><div class="flow-step"><div class="step-number">2</div><div class="step-content"><h3>Set-Cookie</h3><p>Invia session ID sicuro.</p></div></div><div class="flow-step"><div class="step-number">3</div><div class="step-content"><h3>Richieste</h3><p>Browser rimanda cookie → lookup store.</p></div></div><div class="flow-step"><div class="step-number">4</div><div class="step-content"><h3>Refresh</h3><p>Sliding expiration opzionale.</p></div></div><div class="flow-step"><div class="step-number">5</div><div class="step-content"><h3>Logout/Expiry</h3><p>Invalidazione server + cookie.</p></div></div></div>
            <h2>🛡️ Sicurezza</h2>
            <div class="principles-grid"><div class="principle-card advantage"><h3>XSS</h3><ul><li>HttpOnly</li><li>CSP</li><li>Escaping</li></ul></div><div class="principle-card advantage"><h3>CSRF</h3><ul><li>SameSite</li><li>Token</li><li>Origin check</li></ul></div><div class="principle-card disadvantage"><h3>Hijacking</h3><ul><li>HTTPS only</li><li>Rigenera ID post-login</li><li>IP / UA binding (rischi)</li></ul></div><div class="principle-card advantage"><h3>Hardening</h3><ul><li>Short TTL</li><li>Invalidate rotation</li><li>Audit log</li></ul></div></div>
            <h2>💻 Esempi</h2>
            <div class="examples-grid"><div class="example-card"><h3>Express</h3><pre><code>app.use(session({\n  secret: process.env.SECRET,\n  resave:false, saveUninitialized:false,\n  cookie:{ httpOnly:true, sameSite:'lax', secure:true, maxAge:1800000 }\n}));</code></pre></div><div class="example-card"><h3>Redis Store</h3><pre><code>SET sess:abc123 {"uid":42,"role":"admin"} EX 1800</code></pre></div><div class="example-card"><h3>PHP ini</h3><pre><code>session.cookie_httponly=1\nsession.cookie_secure=1\nsession.use_strict_mode=1</code></pre></div><div class="example-card"><h3>Logout</h3><pre><code>req.session.destroy(()=>{\n  res.clearCookie('sid');\n});</code></pre></div></div>
            <div class="info-box"><h3>🎯 Sintesi</h3><p>Cookie trasportano identificatori, lo stato vive lato server. Protezione multilivello minimizza superfici di attacco.</p></div>
            <div class="info-box curiosity"><h3>📚 Curiosità</h3><p>Il primo uso commerciale dei cookie fu per carrelli Netscape nel 1994.</p></div>
        </article>
        <div class="section-navigation"><a class="btn btn--outline" href="jwt.html">← Precedente</a><a class="btn btn--primary" href="webstorage.html">Successivo →</a></div>
    </div></section></div></main>
</div>
<script src="../app.js"></script>
</body>
</html>